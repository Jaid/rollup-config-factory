{"version":3,"file":"emit-file.js","sourceRoot":"","sources":["../../../../../src/plugin/rollupPlugin/emit-file.ts"],"names":[],"mappings":"AAUA,MAAM,cAAc,GAAG;IACrB,OAAO,EAAE,EAAyB;CACnC,CAAA;AAED,MAAM,CAAC,OAAO,UAAU,gBAAgB,CAAC,aAAmC;IAC1E,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE,CAAC;QACxB,MAAM,IAAI,KAAK,CAAC,uDAAuD,CAAC,CAAA;IAC1E,CAAC;IACD,MAAM,OAAO,GAAsB;QACjC,GAAG,cAAc;QACjB,GAAG,aAAa;KACjB,CAAA;IACD,OAAO;QACL,IAAI,EAAE,WAAW;QACjB,KAAK,CAAC,cAAc;YAClB,MAAM,MAAM,GAAG,OAAO,CAAC,OAAO,CAAA;YAC9B,IAAI,CAAC,QAAQ,CAAC;gBACZ,IAAI,EAAE,OAAO;gBACb,QAAQ,EAAE,cAAc;gBACxB,MAAM;aACP,CAAC,CAAA;QACJ,CAAC;KACF,CAAA;AACH,CAAC","sourcesContent":["import type {Plugin} from 'rollup'\nimport type {InputOptions} from 'zeug/types'\n\ntype Options = InputOptions<{\n  defaultsType: typeof defaultOptions\n  requiredOptions: {\n    name: string\n  }\n}>\n\nconst defaultOptions = {\n  content: `` as string | Uint8Array,\n}\n\nexport default function publishimoPlugin(pluginOptions: Options['parameter']): Plugin {\n  if (!pluginOptions.name) {\n    throw new Error(`option “name” is required for Rollup plugin emit-file`)\n  }\n  const options: Options['merged'] = {\n    ...defaultOptions,\n    ...pluginOptions,\n  }\n  return {\n    name: `emit-file`,\n    async generateBundle() {\n      const source = options.content\n      this.emitFile({\n        type: `asset`,\n        fileName: `package.json`,\n        source,\n      })\n    },\n  }\n}\n"]}